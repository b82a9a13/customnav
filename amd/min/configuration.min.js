function cn_view_div(e){if(2==$(".cn-view-div").length&&2==$(".cn-nav-div").length&&(0==e||1==e)){const n=$(".cn-nav-div")[e];0==e?($("#cn_rs_form_width")[0].value=null,$("#cn_rs_form_height")[0].value=null,$("#cn_rs_form_aspect")[0].checked=!1,$("#cn_rs_form_icons")[0].value=null,$("#cn_rs_div")[0].style.display="none",$(".cn-nav-div")[1].style.display="none",$("#cn_rs_success")[0].style.display="none",$("#cn_rs_error")[0].style.display="none"):1==e&&($("#cn_rd_form_div")[0].innerHTML="",$("#cn_rd_error")[0].style.display="none",$("#cn_rd_success")[0].style.display="none",$("#cn_rd_div")[0].style.display="none",$(".cn-nav-div")[0].style.display="none"),n.style.display="block"==n.style.display?"none":"block"}}function role_settings(e){const n=$("#cn_rs_success")[0];n.style.display="none";const t=$("#cn_rs_error")[0];t.style.display="none";const s=$("#cn_rs_div")[0];s.style.display="none";const r=new XMLHttpRequest;r.open("POST","./classes/inc/get_role_setting.inc.php",!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){if(200==this.status)try{const e=JSON.parse(this.responseText);e.error?(t.innerText=e.error,t.style.display="block"):e.success?(n.innerText="Success",n.style.display="block",$("#cn_rs_form_h4")[0].innerText=e.success.name,e.success.new?($("#cn_rs_form_width")[0].value=null,$("#cn_rs_form_height")[0].value=null,$("#cn_rs_form_aspect")[0].checked=!1,$("#cn_rs_form_icons")[0].value=null):0==e.success.new&&($("#cn_rs_form_width")[0].value=e.success.width,$("#cn_rs_form_height")[0].value=e.success.height,$("#cn_rs_form_aspect")[0].checked=e.success.aspect,$("#cn_rs_form_icons")[0].value=e.success.icons),s.style.display="block",setTimeout(()=>{$("#cn_rs_success")[0].style.display="none"},1e3)):(t.innerText="Submit error",t.style.display="block")}catch{t.innerText="Invalid response.",t.style.display="block"}else t.innerText="Connection error.",t.style.display="block"},r.send(`id=${e}`)}function role_displays(e){const n=$("#cn_rd_error")[0];n.style.display="none";const t=$("#cn_rd_success")[0];t.style.display="none";const s=$("#cn_rd_div")[0];s.style.display="none";const r=new XMLHttpRequest;r.open("POST","./classes/inc/get_role_images.inc.php",!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),r.onload=function(){if(200==this.status)try{const e=JSON.parse(this.responseText);e.error?(n.innerText=e.error,n.style.display="block"):e.success?(t.innerText="Success",t.style.display="block",$("#cn_rd_form_div")[0].innerHTML=e.success,s.style.display="block",setTimeout(()=>{$("#cn_rd_success")[0].style.display="none"},1e3)):(n.innerText="Submit error",n.style.display="block")}catch{n.innerText="Invalid response.",n.style.display="block"}else n.innerText="Connection error.",n.style.display="block"},r.send(`id=${e}`)}function cn_new_icon(){if($(".cn-rd-form-img").length>0){const e=$(".cn-rd-form-img").length,n=$("<div>");n.attr("class","cn-image-div-inner");const t=$("<span>").addClass("c-pointer").attr({onclick:`cn_remove_icon(${e})`}).append($("<b>").text("X"));n.append(t);const s=$("<h4>").addClass("text-center").text(`${e+1}`);n.append(s);const r=$("<p>").text("URL: ").append($("<input>").addClass("cn-rd-form-url").attr({type:"text",required:!0}));n.append(r),imgElement=$(".cn-rd-form-img")[0];const c=$("<img>").addClass("cn-rd-form-img");imgElement.getAttribute("style").includes("object-fit:contain;")?c.attr({style:`width:${imgElement.style.width};height:${imgElement.style.height};object-fit:contain;`,src:""}):c.attr({style:`width:${imgElement.style.width};height:${imgElement.style.height};`,src:""}),n.append(c);const l=$("<p>").text("Image: ").append($("<input>").addClass("cn-rd-form-image").attr({type:"file",onchange:`cn_new_file(${e})`}));n.append(l);const o=$("<p>").text("Text: ").append($("<input>").addClass("cn-rd-form-text").attr({type:"text"}));n.append(o);const i=$("<p>").text("Alt text: ").append($("<input>").addClass("cn-rd-form-alttext").attr({type:"text"}));n.append(i),$("#cn_rd_form_div").append(n)}}function cn_new_file(e){const n=$("#cn_rd_error")[0];if(n.style.display="none",e<$(".cn-rd-form-image").length&&e>=0&&$(".cn-rd-form-img").length==$(".cn-rd-form-image").length){const t=$(".cn-rd-form-image")[e],s=t.value.split(".").pop();if("png"==s||"jpg"==s||"jpeg"==s){const n=new FileReader;n.readAsDataURL(t.files[0]),n.addEventListener("load",function(){$(".cn-rd-form-img")[e].setAttribute("src",this.result)})}else t.value="",n.innerText="File must be a png or jpg or jpeg",n.style.display="block"}else n.innerText="Javascript error when uploading file",n.style.display="block"}function cn_remove_icon(e){const n=$("#cn_rd_error")[0];n.style.display="none";const t=$("#cn_rd_success")[0];if(t.style.display="none",1!=$(".cn-image-div-inner").length&&e<=$(".cn-rd-form-url").length&&e>=0&&$(".cn-rd-form-url").length>0&&$(".cn-rd-form-image").length>0&&$(".cn-rd-form-text").length>0&&$(".cn-rd-form-alttext").length>0&&$(".cn-rd-form-url").length==$(".cn-rd-form-image").length&&$(".cn-rd-form-alttext").length==$(".cn-rd-form-text").length&&$(".cn-rd-form-image").length==$(".cn-rd-form-alttext").length){const s=new XMLHttpRequest;s.open("POST","./classes/inc/remove_role_images.inc.php",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.onload=function(){if(200==this.status)try{const s=JSON.parse(this.responseText);s.error?(n.innerText=s.error,n.style.display="block"):s.success?($(".cn-image-div-inner")[e].remove(),$(".cn-image-div-inner").each(function(e,n){$(n).find("h4")[0].innerText=e+1,$(n).find(".cn-rd-form-image")[0].setAttribute("onchange",`cn_new_file(${e})`),$(n).find("span")[0].setAttribute("onclick",`cn_remove_icon(${e})`)}),t.innerText="Success",t.style.display="block"):(n.innerText="Submit error",n.style.display="block")}catch{n.innerText="Invalid response",n.style.display="block"}else n.innerText="Connection error",n.style.display="block"},s.send(`id=${e+1}`)}else n.innerText=1==$(".cn-image-div-inner").length?"You cannot remove the last icon":"Javascript error when delete icon",n.style.display="block"}$("#cn_rs_form")[0].addEventListener("submit",function(e){e.preventDefault(),errorText=$("#cn_rs_error")[0],errorText.style.display="none",successText=$("#cn_rs_success")[0],successText.style.display="none";const n=$("#cn_rs_form_width")[0],t=$("#cn_rs_form_height")[0],s=$("#cn_rs_form_aspect")[0],r=$("#cn_rs_form_icons")[0],c=new XMLHttpRequest;c.open("POST","./classes/inc/set_role_setting.inc.php",!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c.onload=function(){if(200==this.status)try{const e=JSON.parse(this.responseText);e.error?(errorText.innerText=e.error,errorText.style.display="block"):e.success?(successText.innerText="Success",successText.style.display="block"):(errorText.innerText="Submit error",errorText.style.display="block")}catch{errorText.innerText="Invalid response.",errorText.style.display="block"}else errorText.innerText="Connection error.",errorText.style.display="block"},aspectVal=s.checked?1:0,c.send(`width=${n.value}&height=${t.value}&aspect=${aspectVal}&icons=${r.value}`)}),$("#cn_rd_form")[0].addEventListener("submit",function(e){e.preventDefault();const n=$("#cn_rd_error")[0];n.style.display="none";const t=$("#cn_rd_success")[0];if(t.style.display="none",$(".cn-rd-form-url").length>0&&$(".cn-rd-form-image").length>0&&$(".cn-rd-form-text").length>0&&$(".cn-rd-form-alttext").length>0&&$(".cn-rd-form-url").length==$(".cn-rd-form-image").length&&$(".cn-rd-form-alttext").length==$(".cn-rd-form-text").length&&$(".cn-rd-form-image").length==$(".cn-rd-form-alttext").length){const e=$(".cn-rd-form-url"),s=$(".cn-rd-form-image"),r=$(".cn-rd-form-text"),c=$(".cn-rd-form-alttext");let l=new FormData;e.each(function(e,n){l.append(`url${e}`,n.value)}),s.each(function(e,n){l.append(`image${e}`,n.files[0])}),r.each(function(e,n){l.append(`text${e}`,n.value)}),c.each(function(e,n){l.append(`alttext${e}`,n.value)}),l.append("total",e.length);const o=new XMLHttpRequest;o.open("POST","./classes/inc/set_role_images.inc.php"),o.onload=function(){if(200==this.status)try{const e=JSON.parse(this.responseText);e.error?(n.innerText=e.error,n.style.display="block"):e.success?(t.innerText="Success",t.style.display="block"):(n.innerText="Submit error",n.style.display="block")}catch{n.innerText="Invalid response",n.style.display="block"}else n.innerText="Connection error",n.style.display="block"},o.send(l)}else n.innerText="Javascript error when submitting display form",n.style.display="block"});